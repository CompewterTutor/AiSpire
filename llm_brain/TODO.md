# AiSpire Project TODO List

## Setup and Infrastructure
- [x] Set up project directory structure
  - [x] Create folders for Lua Gadget (`lua_gadget/`)
  - [x] Create folders for Python MCP Server (`python_mcp_server/`)
  - [x] Create folders for tests (`tests/`)
  - [x] Create folders for documentation (`docs/`)
- [x] Create initial README.md with project overview
- [x] Set up version control and .gitignore file
- [x] Define coding standards and documentation requirements
- [x] Set up testing framework for both Lua and Python components
  - [x] Set up Busted for Lua testing
  - [x] Set up pytest for Python testing

## Lua Gadget Development
- [ ] Research Vectric Aspire/V-Carve SDK documentation
- [ ] Set up Lua development environment
  - [ ] Install Lua 5.3+ (compatible with Vectric)
  - [ ] Install LuaSocket library
  - [ ] Configure IDE with Lua support
- [x] Implement basic socket server in Lua
  - [x] Set up TCP server on configurable port
  - [x] Implement connection handling and timeouts
  - [x] Add authentication mechanism
- [ ] Create initial Vectric SDK wrapper functions
  - [ ] Job management functions (create, open, save, export)
  - [ ] Vector creation and manipulation functions
  - [ ] Toolpath creation and calculation functions
  - [ ] Layer management functions
- [x] Implement command parsing and execution
  - [x] Create command parser for JSON messages
  - [x] Build command executor with error handling
  - [x] Implement response formatter
- [x] Add support for executing arbitrary Lua code
  - [x] Create sandbox environment for code execution
  - [x] Implement security checks and validation
  - [x] Add timeout mechanism for long-running code
- [x] Implement error handling and logging
  - [x] Create robust error trapping system
  - [x] Set up logging with configurable levels
  - [x] Implement error reporting in standardized format
- [x] Create helper functions for common operations:
  - [x] Path creation and manipulation
    - [x] Circle, rectangle, and polygon functions
    - [x] Path combining and Boolean operations
    - [x] Path offsetting and scaling
  - [x] 3D model import and manipulation
    - [x] Model import from various formats
    - [x] Model transformation functions
    - [x] Model positioning and alignment
  - [x] Vector drawing
    - [x] Line, arc, and curve drawing
    - [x] Text creation and styling
    - [x] Dimension and measurement tools
  - [x] Vector nesting
    - [x] Efficient placement algorithms
    - [x] Rotation and optimization
    - [x] Material utilization reporting
  - [x] Toolpath creation
    - [x] Profile toolpaths
    - [x] Pocket toolpaths
    - [x] Drilling operations
    - [x] 3D roughing and finishing toolpaths
- [x] Add configuration options (port, verbosity, etc.)
  - [x] Create config file support
  - [x] Add runtime configuration changes
  - [x] Implement configuration validation
- [x] Create documentation for Lua component
  - [x] Document all public functions and their parameters
  - [x] Create examples for common operations
  - [x] Add troubleshooting section

## Python MCP Server Development
- [x] Set up Python development environment
  - [x] Set up Python 3.8+
  - [x] Create virtual environment
  - [x] Set up dependency management (requirements.txt)
- [x] Install necessary libraries for MCP server implementation
  - [x] Socket communication libraries
  - [x] MCP protocol libraries
  - [x] JSON parsing libraries
  - [x] Logging and monitoring libraries
- [x] Create basic MCP server structure
  - [x] Implement server startup and configuration
  - [x] Create routing for different endpoints
  - [x] Set up authentication and authorization
- [x] Implement socket client to connect to Lua gadget
  - [x] Create connection manager
  - [x] Implement auto-reconnect functionality
  - [x] Add timeout and error handling
- [x] Create command generation system
  - [x] Build Lua code generation templates
  - [x] Implement command validation
  - [x] Create command queueing system
- [x] Implement result parsing and formatting
  - [x] Parse JSON responses from Lua gadget
  - [x] Format results according to MCP protocol
  - [x] Handle different result types (success, error, etc.)
- [x] Add LLM integration
  - [x] Implement MCP protocol handlers
  - [x] Create message parsers for LLM requests
  - [x] Set up response formatting for LLMs
- [x] Create command templates for common operations
  - [x] Job management templates
  - [x] Vector creation templates
  - [x] Toolpath generation templates
  - [x] Layer management templates
- [x] Implement error handling and recovery
  - [x] Create robust error trapping
  - [x] Implement retry mechanism for failed commands
  - [x] Add detailed error reporting
- [x] Add logging and monitoring
  - [x] Set up structured logging
  - [ ] Implement performance metrics
  - [ ] Create alerts for critical issues
- [ ] Create documentation for Python component
  - [ ] API documentation
  - [ ] Deployment instructions
  - [ ] Configuration guide

## Integration and Testing
- [x] Create end-to-end tests
  - [x] Test socket communication between components
  - [x] Test command execution flow
  - [x] Test error handling and recovery
- [x] Test with mock Vectric SDK
  - [x] Create mock implementation of Vectric SDK
  - [x] Test all wrapper functions
  - [x] Validate command execution
- [ ] Test with actual Vectric software
  - [ ] Install Vectric Aspire/V-Carve
  - [ ] Configure test environment
  - [ ] Validate real-world operation
- [ ] Create sample commands and workflows
  - [ ] Basic vector creation workflow
  - [ ] Toolpath generation workflow
  - [ ] Complex design workflow
- [ ] Perform performance testing
  - [ ] Test command execution latency
  - [ ] Test concurrent command handling
  - [ ] Identify and resolve bottlenecks
- [ ] Address security concerns
  - [ ] Perform security audit
  - [ ] Test authentication mechanisms
  - [ ] Validate input sanitization

## Documentation
- [ ] Create user documentation
  - [ ] Installation guide
  - [ ] Configuration guide
  - [ ] Command reference
- [ ] Create developer documentation
  - [x] Architecture overview
  - [ ] Component interaction diagrams
  - [ ] Code organization and structure
- [ ] Document API endpoints
  - [ ] MCP server endpoints
  - [ ] Command structure and parameters
  - [ ] Response formats and status codes
- [ ] Create examples and tutorials
  - [ ] Basic operation examples
  - [ ] Advanced workflow tutorials
  - [ ] Troubleshooting scenarios
- [ ] Document configuration options
  - [ ] Lua gadget configuration
  - [ ] MCP server configuration
  - [ ] Security settings
- [ ] Create troubleshooting guide
  - [ ] Common issues and solutions
  - [ ] Diagnostic procedures
  - [ ] Support contact information

## Future Enhancements
- [ ] Web UI for direct interaction
  - [ ] Real-time visualization of operations
  - [ ] Command builder interface
  - [ ] Job management dashboard
- [ ] Command history and session management
  - [ ] Save and replay command sequences
  - [ ] Persistent sessions across restarts
  - [ ] Command versioning
- [ ] User authentication and permissions
  - [ ] Multi-user support
  - [ ] Role-based access control
  - [ ] Authentication integrations (OAuth, SAML)
- [ ] Enhanced visualization of results
  - [ ] 3D preview of models and toolpaths
  - [ ] Interactive result manipulation
  - [ ] Simulation of machining operations
- [ ] Support for additional CAD/CAM operations
  - [ ] Advanced toolpath strategies
  - [ ] Multi-axis machining support
  - [ ] Sheet nesting optimization
- [ ] Plugin system for extending functionality
  - [ ] Plugin architecture design
  - [ ] Plugin marketplace or repository
  - [ ] Plugin management interface
- [ ] Version control integration for designs
  - [ ] Track changes to designs
  - [ ] Branch and merge support
  - [ ] Collaboration features

## New SDK-Based Enhancements
- [x] Implement advanced geometric operations
  - [x] Matrix transformations (using RotationMatrix2D, ScalingMatrix2D, etc.)
  - [x] Complex path creation with ContourCarriage
  - [ ] Box2D operations for bounds management
  - [ ] Polar coordinate functions
- [ ] Add specialized job management
  - [ ] Support for two-sided job creation (CreateNew2SidedJob)
  - [ ] Rotary job creation and manipulation (CreateNewRotaryJob)
  - [ ] Material block configuration and thickness management
- [ ] Implement comprehensive toolpath strategy handlers
  - [ ] Profile toolpaths with custom parameters
  - [ ] Pocket toolpaths with various strategies
  - [ ] V-carving with advanced options
  - [ ] Fluting toolpaths
  - [ ] Prism carving toolpaths
  - [ ] 3D roughing and finishing toolpaths
  - [ ] Drilling with custom parameters
- [ ] Create tool database integration
  - [ ] Access system tool database
  - [ ] Create custom tools programmatically
  - [ ] Save and load tool configurations
- [ ] Add UI integration for Vectric
  - [ ] Custom HTML dialogs for user interaction
  - [ ] Progress bars for long-running operations
  - [ ] File selection dialogs
  - [ ] Custom markers and on-screen guides
- [ ] Integrate system information
  - [ ] Application version detection
  - [ ] Aspire vs. V-Carve Pro detection
  - [ ] Access to system file locations
  - [ ] Registry access for persistent settings
- [ ] Create external toolpath capabilities
  - [ ] Generate custom toolpaths from scratch
  - [ ] Import toolpaths from external sources
  - [ ] Export toolpaths to various formats